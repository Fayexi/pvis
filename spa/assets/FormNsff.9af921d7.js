import{Q as G}from"./QIcon.89b2ae27.js";import{Q}from"./QBtn.c3151272.js";import{Q as H,a as D}from"./QCard.71daa90d.js";import{Q as Z}from"./QTooltip.952a721d.js";import{u as de,Q as J}from"./QInput.7f82834f.js";import{Q as me,a as ee,b as ce,c as fe}from"./QTable.6b434b44.js";import{Q as pe}from"./QSeparator.7c3dded0.js";import{b as ve}from"./QSelect.2543a518.js";import{u as ge,a as be,b as he,d as _e,c as ye,e as Fe,f as te}from"./use-key-composition.4fd64cc0.js";import{r as Y,s as g,g as oe,H as Ce,M as ie,U as Se,h as V,G as Ve,N as we,_ as ke,aa as Qe,f as S,$,E as p,k as i,j as u,a1 as K,C as le,i as L,X as I,ab as Ne,a0 as ae,a2 as ze,Z as ne,Y as xe}from"./index.abf366c9.js";import{c as De}from"./render.04c64b32.js";import{z as Pe,Q as Ae}from"./format.921e47b3.js";import{Q as qe,C as Te}from"./ClosePopup.d0c84cf0.js";import{Q as je}from"./QCardActions.f7b10c9a.js";import"./dom.17ea84af.js";import"./use-router-link.43533fdf.js";import"./use-dark.f54a1a29.js";import"./scroll.4aa12ad6.js";import"./focus-manager.8e1b27e8.js";import"./QList.b4b939b3.js";import"./QMarkupTable.ac2e9cf3.js";import"./QItemLabel.1d4ddb5b.js";function N(e,a,w,C){const d=[];return e.forEach(m=>{C(m)===!0?d.push(m):a.push({failedPropValidation:w,file:m})}),d}function E(e){e&&e.dataTransfer&&(e.dataTransfer.dropEffect="copy"),ie(e)}const $e={multiple:Boolean,accept:String,capture:String,maxFileSize:[Number,String],maxTotalSize:[Number,String],maxFiles:[Number,String],filter:Function},Ie=["rejected"];function Ee({editable:e,dnd:a,getFileInput:w,addFilesToQueue:C}){const{props:d,emit:m,proxy:y}=oe(),n=Y(null),f=g(()=>d.accept!==void 0?d.accept.split(",").map(t=>(t=t.trim(),t==="*"?"*/":(t.endsWith("/*")&&(t=t.slice(0,t.length-1)),t.toUpperCase()))):null),k=g(()=>parseInt(d.maxFiles,10)),P=g(()=>parseInt(d.maxTotalSize,10));function A(t){if(e.value)if(t!==Object(t)&&(t={target:null}),t.target!==null&&t.target.matches('input[type="file"]')===!0)t.clientX===0&&t.clientY===0&&Ce(t);else{const h=w();h&&h!==t.target&&h.click(t)}}function q(t){e.value&&t&&C(null,t)}function O(t,h,z,x){let o=Array.from(h||t.target.files);const b=[],F=()=>{b.length!==0&&m("rejected",b)};if(d.accept!==void 0&&f.value.indexOf("*/")===-1&&(o=N(o,b,"accept",s=>f.value.some(c=>s.type.toUpperCase().startsWith(c)||s.name.toUpperCase().endsWith(c))),o.length===0))return F();if(d.maxFileSize!==void 0){const s=parseInt(d.maxFileSize,10);if(o=N(o,b,"max-file-size",c=>c.size<=s),o.length===0)return F()}if(d.multiple!==!0&&o.length!==0&&(o=[o[0]]),o.forEach(s=>{s.__key=s.webkitRelativePath+s.lastModified+s.name+s.size}),x===!0){const s=z.map(c=>c.__key);o=N(o,b,"duplicate",c=>s.includes(c.__key)===!1)}if(o.length===0)return F();if(d.maxTotalSize!==void 0){let s=x===!0?z.reduce((c,B)=>c+B.size,0):0;if(o=N(o,b,"max-total-size",c=>(s+=c.size,s<=P.value)),o.length===0)return F()}if(typeof d.filter=="function"){const s=d.filter(o);o=N(o,b,"filter",c=>s.includes(c))}if(d.maxFiles!==void 0){let s=x===!0?z.length:0;if(o=N(o,b,"max-files",()=>(s++,s<=k.value)),o.length===0)return F()}if(F(),o.length!==0)return o}function U(t){E(t),a.value!==!0&&(a.value=!0)}function r(t){ie(t),(t.relatedTarget!==null||Se.is.safari!==!0?t.relatedTarget!==n.value:document.elementsFromPoint(t.clientX,t.clientY).includes(n.value)===!1)===!0&&(a.value=!1)}function T(t){E(t);const h=t.dataTransfer.files;h.length!==0&&C(null,h),a.value=!1}function R(t){if(a.value===!0)return V("div",{ref:n,class:`q-${t}__dnd absolute-full`,onDragenter:E,onDragover:E,onDragleave:r,onDrop:T})}return Object.assign(y,{pickFiles:A,addFiles:q}),{pickFiles:A,addFiles:q,onDragover:U,onDragleave:r,processFiles:O,getDndNode:R,maxFilesNumber:k,maxTotalSizeNumber:P}}var Oe=De({name:"QFile",inheritAttrs:!1,props:{...ge,...be,...$e,modelValue:[File,FileList,Array],append:Boolean,useChips:Boolean,displayValue:[String,Number],tabindex:{type:[String,Number],default:0},counterLabel:Function,inputClass:[Array,String,Object],inputStyle:[Array,String,Object]},emits:[...he,...Ie],setup(e,{slots:a,emit:w,attrs:C}){const{proxy:d}=oe(),m=_e(),y=Y(null),n=Y(!1),f=ye(e),{pickFiles:k,onDragover:P,onDragleave:A,processFiles:q,getDndNode:O}=Ee({editable:m.editable,dnd:n,getFileInput:W,addFilesToQueue:X}),U=de(e),r=g(()=>Object(e.modelValue)===e.modelValue?"length"in e.modelValue?Array.from(e.modelValue):[e.modelValue]:[]),T=g(()=>te(r.value)),R=g(()=>r.value.map(l=>l.name).join(", ")),t=g(()=>Pe(r.value.reduce((l,v)=>l+v.size,0))),h=g(()=>({totalSize:t.value,filesNumber:r.value.length,maxFiles:e.maxFiles})),z=g(()=>({tabindex:-1,type:"file",title:"",accept:e.accept,capture:e.capture,name:f.value,...C,id:m.targetUid.value,disabled:m.editable.value!==!0})),x=g(()=>"q-file q-field--auto-height"+(n.value===!0?" q-file--dnd":"")),o=g(()=>e.multiple===!0&&e.append===!0);function b(l){const v=r.value.slice();v.splice(l,1),s(v)}function F(l){const v=r.value.indexOf(l);v>-1&&b(v)}function s(l){w("update:modelValue",e.multiple===!0?l:l[0])}function c(l){l.keyCode===13&&we(l)}function B(l){(l.keyCode===13||l.keyCode===32)&&k(l)}function W(){return y.value}function X(l,v){const _=q(l,v,r.value,o.value),M=W();M!=null&&(M.value=""),_!==void 0&&((e.multiple===!0?e.modelValue&&_.every(ue=>r.value.includes(ue)):e.modelValue===_[0])||s(o.value===!0?r.value.concat(_):_))}function j(){return[V("input",{class:[e.inputClass,"q-file__filler"],style:e.inputStyle})]}function se(){if(a.file!==void 0)return r.value.length===0?j():r.value.map((v,_)=>a.file({index:_,file:v,ref:this}));if(a.selected!==void 0)return r.value.length===0?j():a.selected({files:r.value,ref:this});if(e.useChips===!0)return r.value.length===0?j():r.value.map((v,_)=>V(ve,{key:"file-"+_,removable:m.editable.value,dense:!0,textColor:e.color,tabindex:e.tabindex,onRemove:()=>{b(_)}},()=>V("span",{class:"ellipsis",textContent:v.name})));const l=e.displayValue!==void 0?e.displayValue:R.value;return l.length!==0?[V("div",{class:e.inputClass,style:e.inputStyle,textContent:l})]:j()}function re(){const l={ref:y,...z.value,...U.value,class:"q-field__input fit absolute-full cursor-pointer",onChange:X};return e.multiple===!0&&(l.multiple=!0),V("input",l)}return Object.assign(m,{fieldClass:x,emitValue:s,hasValue:T,inputRef:y,innerValue:r,floatingLabel:g(()=>T.value===!0||te(e.displayValue)),computedCounter:g(()=>{if(e.counterLabel!==void 0)return e.counterLabel(h.value);const l=e.maxFiles;return`${r.value.length}${l!==void 0?" / "+l:""} (${t.value})`}),getControlChild:()=>O("file"),getControl:()=>{const l={ref:m.targetRef,class:"q-field__native row items-center cursor-pointer",tabindex:e.tabindex};return m.editable.value===!0&&Object.assign(l,{onDragover:P,onDragleave:A,onKeydown:c,onKeyup:B}),V("div",l,[re()].concat(se()))}}),Object.assign(d,{removeAtIndex:b,removeFile:F,getNativeElement:()=>y.value}),Ve(d,"nativeEl",()=>y.value),Fe(m)}});const Ue={data:()=>({showAddPodDialog:!1,file_name:null,file_upload:null,mission:{leader:null,leader_position:null,member:null,member_position:null,pod:null,date_issued:null,date_visit:null},tblMoCols:[{name:"file_name",label:"File",align:"left",sortable:!1,field:e=>e.file_name,format:e=>`${e||""}`},{name:"action",label:"Action",align:"center",sortable:!1,field:e=>e.action,format:e=>`${e||""}`}],tblMoRows:[{file_name:"Sample Form No. 9745 File",action:"Sample"}]}),computed:{},watch:{},methods:{async initApp(){},onCreatePod(){this.showAddPodDialog=!0}},mounted(){this.initApp()}},Re={class:"form-main"},Be={class:"text-h6"},Me=p("span",{class:"card-header-label"}," Form No. 9745 ",-1),Ke={class:"absolute-bottom-right q-pr-md",style:{transform:"translateY(50%)","z-index":"100"}},Le={class:"row q-col-gutter-md"},Ye={class:"col-lg-5 col-md-5 col-sm-5 col-xs-12"},We={key:0,style:{"min-width":"92px",padding:"0"}},Xe=p("div",{class:"text-h6 flex"}," Upload Form No. 9745 ",-1),Ge={class:"row q-col-gutter-md"},He={class:"col-lg-12 col-md-12 col-sm-12 col-xs-12"},Ze={class:"col-lg-12 col-md-12 col-sm-12 col-xs-12"},Je={class:"q-gutter-sm q-pa-sm"};function et(e,a,w,C,d,m){const y=Qe("uppercase");return S(),$(K,null,[p("div",null,[p("div",Re,[i(H,null,{default:u(()=>[i(D,{class:"bg-amber-7"},{default:u(()=>[p("div",Be,[i(G,{name:"edit_note",size:"sm"}),Me]),p("div",Ke,[i(Q,{fab:"",icon:"add",color:"green-5",onClick:m.onCreatePod},null,8,["onClick"])])]),_:1}),i(D,{style:{"padding-top":"0","padding-bottom":"0"}}),i(D,null,{default:u(()=>[p("div",Le,[p("div",Ye,[le((S(),L(J,{"bottom-slots":"",label:"Search",modelValue:e.search,"onUpdate:modelValue":a[1]||(a[1]=n=>e.search=n),onKeypress:a[2]||(a[2]=Ne(n=>e.onSearch("search"),["enter"])),dense:""},{append:u(()=>[i(Q,{icon:"search",color:"primary",flat:"",round:"",onClick:a[0]||(a[0]=n=>e.onSearch("search"))},{default:u(()=>[i(Z,null,{default:u(()=>[I("Click to search")]),_:1})]),_:1}),i(Q,{icon:"autorenew",color:"red",flat:"",round:"",onClick:e.onRefresh},{default:u(()=>[i(Z,null,{default:u(()=>[I("Click to refresh")]),_:1})]),_:1},8,["onClick"])]),_:1},8,["modelValue"])),[[y]])])]),p("div",null,[i(me,{title:"",rows:e.tblMoRows,columns:e.tblMoCols,"row-key":"name",pagination:e.pagination,"onUpdate:pagination":a[3]||(a[3]=n=>e.pagination=n),"rows-per-page-options":e.rowPerPageOptions,loading:e.fetchLoading,onRequest:e.onFetchData},{header:u(n=>[i(ee,{props:n,style:{"margin-top":"10px"}},{default:u(()=>[(S(!0),$(K,null,ae(n.cols,f=>(S(),L(ce,{key:f.name,props:n,onClick:k=>e.toggleSort(f.name),class:ze({sortable:f.sortable})},{default:u(()=>[I(ne(f.label)+" ",1),i(G,{name:f.name===e.sortKey&&e.sortOrder===1?"arrow_upward":"arrow_downward",class:"q-ml-md"},null,8,["name"])]),_:2},1032,["props","onClick","class"]))),128))]),_:2},1032,["props"])]),body:u(n=>[i(ee,{props:n,class:"hoverable"},{default:u(()=>[(S(!0),$(K,null,ae(n.cols,f=>(S(),L(fe,{key:f.name,props:n,class:"text-wrap-normal"},{default:u(()=>[I(ne(f.name==="action"?"":f.value)+" ",1),f.name==="action"?(S(),$("div",We,[i(Q,{icon:"open_in_new",flat:"",color:"primary",size:"sm",label:"View",onClick:k=>e.onSelectItem(n.row.id)},null,8,["onClick"])])):xe("",!0)]),_:2},1032,["props"]))),128))]),_:2},1032,["props"])]),_:1},8,["rows","columns","pagination","rows-per-page-options","loading","onRequest"])])]),_:1})]),_:1})])]),i(Ae,{modelValue:e.showAddPodDialog,"onUpdate:modelValue":a[6]||(a[6]=n=>e.showAddPodDialog=n)},{default:u(()=>[i(H,{style:{width:"700px","max-width":"80vw"}},{default:u(()=>[i(qe,{ref:"form",onValidationError:e.onValidationError,greedy:""},{default:u(()=>[p("div",null,[i(D,null,{default:u(()=>[Xe]),_:1}),i(pe,{class:"mb-5",style:{"margin-bottom":"15px"}}),i(D,{class:"q-pt-none"},{default:u(()=>[p("div",Ge,[p("div",He,[i(J,{outlined:"",dense:"",modelValue:e.file_name,"onUpdate:modelValue":a[4]||(a[4]=n=>e.file_name=n),label:"Name of File"},null,8,["modelValue"])]),p("div",Ze,[i(Oe,{outlined:"",dense:"",modelValue:e.file_upload,"onUpdate:modelValue":a[5]||(a[5]=n=>e.file_upload=n),label:"Form No. 9745"},null,8,["modelValue"])])])]),_:1})])]),_:1},8,["onValidationError"]),i(je,{align:"right",class:"bg-white text-teal"},{default:u(()=>[p("div",Je,[le(i(Q,{icon:"close",color:"red",label:"Close"},null,512),[[Te]]),i(Q,{icon:"send",color:"green-7",label:"Submit",onClick:e.onConfirmSubmission},null,8,["onClick"])])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)}var St=ke(Ue,[["render",et]]);export{St as default};
